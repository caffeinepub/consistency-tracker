{
  "kind": "build_request",
  "title": "Fix Daily Tracking to store and display completed values per month (no February bleed-over)",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Ensure the Daily Tracking grid displays completion state and any saved values for the currently selected month/year only, so switching to another month (e.g., March) never shows data from a different month (e.g., February).",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-user-1"
        ],
        "quotes": [
          "When I select other months such as march on the daily tracking to mark task completed it still displays the February value.",
          "Can you update each month on daily tracker once box is ticked to match the value for that month?",
          "1. Correct",
          "3. Permanently"
        ]
      },
      "acceptanceCriteria": [
        "After completing a habit day in February, switching to March shows March data only (unchecked/empty unless March has saved completions).",
        "After completing a habit day in March, switching back to February shows February data only; February and March do not affect each other.",
        "Reloading the app preserves month-specific completion data (data is persisted in the backend and correctly reloaded per selected month/year)."
      ]
    },
    {
      "id": "REQ-2",
      "text": "When the user switches months in the Daily Tracking view, do not render the previous month’s records while the new month’s records are being fetched; instead, show an empty state for the grid (all unchecked) or a loading/skeleton state until the selected month/year records query resolves.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-1"
        ],
        "quotes": [
          "Yes but only display once the box is ticked completed"
        ]
      },
      "acceptanceCriteria": [
        "Switching from February to March does not temporarily or permanently show February checkmarks/amounts under March.",
        "If the selected month’s data is still loading, the UI indicates loading (or shows a cleared grid) rather than showing the last month’s data."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Make record mapping in the Daily Tracking grid robustly month-separated by ensuring any client-side keys/maps used to look up records cannot collide across months/years (e.g., include month/year in the lookup key), even if records from multiple months were ever present in memory.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-1"
        ],
        "quotes": [
          "store and display completed-task values separately per month"
        ]
      },
      "acceptanceCriteria": [
        "Client-side record lookup keys used by the grid uniquely identify a record by habitId + day + month + year.",
        "No completion/amount display can be caused by a record from a different month/year due to key collisions."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in backend/main.mo (no additional canisters/services).",
    "Do not edit files under frontend/src/components/ui or the immutable hook files listed in SYSTEM_CONTEXT."
  ],
  "nonGoals": [
    "Do not change the monthly targets feature behavior or UI.",
    "Do not add new authentication providers (Internet Identity remains the only auth method).",
    "Do not introduce external databases or third-party storage."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}